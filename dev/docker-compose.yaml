services:
  platform-front:
    container_name: currency-project-front
    image: ghcr.io/laym0n/currency-project-front:release-1.0.0
    env_file:
      - ./env/currency-project-front.env
    ports:
      - 3001:3000
    restart: unless-stopped
  postgresql:
    container_name: postgresql
    image: postgres:17
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
      PGDATA: "/var/lib/postgresql/data/pgdata"
      POSTGRES_DB: currency_project
    ports:
      - 5434:5432
    networks:
      back-db:
    restart: unless-stopped
  back:
    container_name: back
    image: iluhander/virtual-currency
    env_file:
      - ./env/back.env
    ports:
      - 8080:8787
    networks:
      back-db:
    depends_on:
      - postgresql
    restart: unless-stopped
  paymentspod:
    container_name: paymentspod
    image: docker.io/vndgindex/paymentspod
    env_file:
      - ./env/paymentspod.env
    ports:
      - 8081:8081
    networks:
      plugin-back:
    restart: unless-stopped
  authpod:
    container_name: authpod
    image: docker.io/vndgindex/authpod
    env_file:
      - ./env/authpod.env
    ports:
      - 8082:8082
    networks:
      plugin-back:
      auth-db:
    restart: unless-stopped
  postgresql-auth:
    container_name: postgresql-auth
    image: postgres:17
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
      PGDATA: "/var/lib/postgresql/data/pgdata"
      POSTGRES_DB: postgresql-auth
    ports:
      - 5435:5432
    networks:
      auth-db:
    restart: unless-stopped
networks:
  back-db:
  plugin-back:
  auth-db:
